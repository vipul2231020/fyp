
<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>NIRAKSHAK</title>
<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: "Poppins", sans-serif;
}

body {
  height: 100vh;
  overflow: hidden; 
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  background: radial-gradient(circle at top right, #d2efff 0%, #eaf7ff 40%, #c1e3ff 100%);
  color: #333;
}


header {
  width: 100%;
  height: 55px;
  background: linear-gradient(90deg, #007bff, #00c6ff);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: 600;
  letter-spacing: 0.5px;
  font-size: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}


.dashboard {
  display: grid;
  grid-template-areas:
    "left ai right"
    "btns btns btns"
    "loc loc loc";
  grid-template-columns: 1fr 1.2fr 1fr;
  grid-template-rows: 1fr auto auto;
  gap: 10px;
  padding: 10px;
  width: 95%;
  max-width: 850px;
  flex-grow: 1;
  align-items: center;
  justify-items: center;
}


.card {
  width: 95%;
  min-height: 100px;
  text-align: center;
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.25);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  transition: 0.3s ease;
  display: flex;
  flex-direction: column;
  justify-content: center;
  color: #fff;
}
.card h3 {
  font-size: 16px;
  margin-bottom: 4px;
}
.card h1 {
  font-size: 26px;
  font-weight: 700;
}
.card:hover {
  transform: scale(1.03);
}


.primary { background: linear-gradient(135deg, #8BC6EC, #9599E2); }
.success { background: linear-gradient(135deg, #38ef7d, #11998e); }
.warning { background: linear-gradient(135deg, #FFD200, #F7971E); }
.danger { background: linear-gradient(135deg, #ff416c, #ff4b2b); }
.hide { display: none; }


.btn-group {
  grid-area: btns;
  width: 100%;
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 2px;
}

button {
  flex: 1;
  margin: 0 8px;
  border: none;
  border-radius: 12px;
  padding: 12px 0;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  color: white;
  transition: all 0.2s ease;
  text-align: center;
  white-space: nowrap;
}
button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
#btn_fwd.success { background: linear-gradient(135deg, #00b09b, #96c93d); }
#btn_stop.danger { background: linear-gradient(135deg, #f85032, #e73827); }
#btn_back.success { background: linear-gradient(135deg, #36D1DC, #5B86E5); }


#ai_card {
  grid-area: ai;
  min-height: 130px;
  background: linear-gradient(135deg, #43cea2, #185a9d);
  color: #fff;
}
#ai_card h2 { font-size: 18px; margin-bottom: 6px; }
#ai_card h3 { font-size: 14px; margin: 2px 0; }


#left { grid-area: left; }
#right { grid-area: right; }

#location {
  grid-area: loc;
  width: 40%;
  background: linear-gradient(135deg, #4facfe, #00f2fe);
  cursor: pointer;
}
#location a {
  color: white;
  text-decoration: none;
  font-size: 16px;
  font-weight: 600;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* FOOTER */
footer {
  font-size: 12px;
  color: #444;
  padding-bottom: 5px;
  opacity: 0.8;
}
</style>
</head>
<body onload="liveDataAjax()">

<header>NIRAKSHAK DASHBOARD
</header>

<div class="dashboard">

  <div class="card primary" id="left">
    <h3>Left Sensor</h3>
    <h1>0</h1>
  </div>

  <div class="card" id="ai_card">
    <h2>AI Fault Detection</h2>
    <h3 id="ai_status_text">Status: -</h3>
    <h3 id="ai_fault_text">Fault: - %</h3>
    <h3 id="ai_severity_text">Severity: -</h3>
  </div>

  <div class="card primary" id="right">
    <h3>Right Sensor</h3>
    <h1>0</h1>
  </div>

  <div class="btn-group">
    <button onclick="onClickBtn('btn_fwd')" id="btn_fwd" class="success">FORWARD</button>
    <button onclick="onClickBtn('btn_stop')" id="btn_stop" class="danger">STOP</button>
    <button onclick="onClickBtn('btn_back')" id="btn_back" class="success">BACK</button>
  </div>

  <div class="card" id="location">
    <a href="https://maps.app.goo.gl/Wmyqr1H4hy8awwjN7">üìç View Location</a>
  </div>

</div>

<footer>¬© 2025 IoT + AI Railway Monitoring</footer>

<script>

var DRT=500;
function updateCSSClass(e,css){e.className='card '+css;}
function updateData(data){
  document.getElementById("left").children[1].innerHTML=data.left;
  document.getElementById("right").children[1].innerHTML=data.right;
  document.getElementById("ai_status_text").innerHTML="Status: "+data.ai_status;
  document.getElementById("ai_fault_text").innerHTML="Fault: "+data.fault_percent+" %";
  document.getElementById("ai_severity_text").innerHTML="Severity: "+data.severity;
  updateCSSClass(document.getElementById("ai_card"),data.ai_class);
  document.getElementById("btn_fwd").innerHTML=data.btn_fwd;
  document.getElementById("btn_stop").innerHTML=data.btn_stop;
  document.getElementById("btn_back").innerHTML=data.btn_back;
  document.getElementById("btn_fwd").className=data.btn_fwd_class;
  document.getElementById("btn_stop").className=data.btn_stop_class;
  document.getElementById("btn_back").className=data.btn_back_class;
}
function getCommand(b,v){if(v=='ON')return'OFF';return v;}
function onClickBtn(b){var v=document.getElementById(b).innerHTML;var c=getCommand(b,v);sendButtonClick('/act?'+b+'='+c);}
function sendButtonClick(url){const x=new XMLHttpRequest();x.open('GET',url,true);x.onload=()=>{if(x.readyState===4&&x.status===200){var d=JSON.parse(x.responseText);updateData(d);}};x.send();}
function liveDataAjax(){const x=new XMLHttpRequest();x.open('GET','/data.json',true);x.onload=()=>{if(x.readyState===4&&x.status===200){var d=JSON.parse(x.responseText);updateData(d);setTimeout(liveDataAjax,DRT);}};x.send();}
</script>
</body>
</html>

